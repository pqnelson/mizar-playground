\chapter{Group Theory in Mizar}

\section{First-Order Logic in Mizar}

\subsection{Propositional Logic}
We will briefly review Mizar's syntax for formulas.

\begin{equation}
  \neg\Phi\quad\equiv\quad\mathtt{not}~\Phi
\end{equation}
\begin{equation}
  \Phi\lor\Psi\quad\equiv\quad\Phi~\mathtt{or}~\Psi
\end{equation}
\begin{equation}
  \Phi\land\Psi\quad\equiv\quad\Phi~\mathtt{\&}~\Psi
\end{equation}
\begin{equation}
  \Phi\implies\Psi\quad\equiv\quad\Phi~\mathtt{implies}~\Psi
\end{equation}
\begin{equation}
  \Phi\iff\Psi\quad\equiv\quad\Phi~\mathtt{iff}~\Psi
\end{equation}

\subsection{Typing Statements as Propositions}
Unique to Mizar is that typing judgements are object language
propositions. When we write ``\texttt{x is natural number}'', that's a
proposition. Type theory would make it a judgement, a proposition
\emph{in the metalanguage}. Mizar makes it a proposition in the
\emph{object} language. That is to say, if $t$ is a term in Mizar and
$\mathcal{T}$ is a Mizar type, then
\begin{equation}
  t~\mathtt{is}~\mathcal{T}
\end{equation}
is a proposition in Mizar.

\subsection{Quantifiers}
Quantifiers are a bit trickier. We quantify a variable over a type.
\begin{equation}
\forall_{x\esti A}\Phi\quad\equiv\quad\mathtt{for}~x~\mathtt{being}~A~\mathtt{holds}~\Phi
\end{equation}
\begin{equation}
\exists_{x\esti A}\Phi\quad\equiv\quad\mathtt{ex}~x~\mathtt{being}~A~\mathtt{st}~\Phi
\end{equation}
We can also just ``stack'' multiple quantifiers next to each other, like
\begin{equation}
\forall_{x\esti A}\forall_{y\esti B}\Phi\quad\equiv\quad\mathtt{for}~x~\mathtt{being}~A~\mathtt{for}~y~\mathtt{being}~B~\mathtt{holds}~\Phi.
\end{equation}
We have syntactic sugar for universal quantification of an implication:
\begin{equation}
\forall_{x\esti A}\Phi\implies\Psi\quad\equiv\quad\mathtt{for}~x~\mathtt{being}~A~\mathtt{st}~\Phi~\mathtt{holds}~\Psi.
\end{equation}

\begin{exercise}
  Translate into Mizar ``Every element $x\in X$ corresponds to a unique
  $y\in Y$ such that $\Phi$ holds.''
\end{exercise}

\subsection{Referring to Labels}\label{par:introduction:referring-to-labels}
Mizar can refer to theorems from another article, say
``\verb#ARTICLE#'', by writing ``\verb#ARTICLE:56#'' to refer to theorem 56.
Definitions are referred to using ``\verb#ARTICLE:def xx#'' (where
``\verb#xx#'' is a number). \emph{It is a common beginner's mistake to
try to refer to theorem $X$ by writing } ``\verb#ARTICLE:ThX#''.

One quirk when referring to multiple theorems from the same article, we
can simply separate them by commas. For example ``\verb#ARTICLE:x,y,z#''
refers to theorems {\tt x}, {\tt y}, and {\tt z} from ``\verb#ARTICLE#''.
Similarly, we can do likewise for definitions. For example,
``\verb#ARTICLE:def a,b,c#'' refers to definitions {\tt a}, {\tt b},
{\tt c} from ``\verb#ARTICLE#''.

Informally, outside of Mizar code, I may write ``\verb#ARTICLE:ThX#'' to
refer to Theorem {\tt X} from ``\verb#ARTICLE#''. When citing the Mizar
mathematical library, I follow the Mizar citation conventions. For
example, a citation like \mml[def10]{xboole0} refers to definition 10
from \verb#XBOOLE_0#. The only differences are that I use small-caps (for
visual ease), I sometimes prepend ``Th'' before the theorem number, and
I sometimes omit a space between ``def'' and the number.

\subsection{Final remark on notations used in Mizar}
There are a few quirky choices of notation which I wish to discuss, just
to let the reader be aware of it. I will also remind the reader when it
comes up in the future:\footnote{Shinshu University has a webpage giving
a ``rosetta stone'' for Mizar notation and the usual mathematical
notation, see: \url{http://markun.cs.shinshu-u.ac.jp/kiso/projects/proofchecker/mizar/mizardictionary1.htm}}

\begin{enumerate}
\item\index{\texttt{f.x}!Mizar for $f(x)$} In mathematics, function application is written $f(x)$, but in
  Mizar it is ``\texttt{f.x}''
\item\index{\texttt{f.:A}!Mizar for $f(A)$} Applying a function to a set is denoted $f(A)$, but in Mizar it is
  denoted ``\texttt{f.:A}''
\item\index{\texttt{f''}@{\texttt{f"\""}}!Mizar for $f^{-1}$} The inverse function relating $y=f(x)$ to $f^{-1}(y)=x$, in Mizar
  is denoted by ``\texttt{f".y}''. More generally, instead of using
  superscript $-1$, Mizar will use double quotes.
\item\index{\texttt{f \mid A}@{\texttt{f"|"A}}!Mizar for $f\vert_{A}$} If $f\colon X\to Y$ is a function of sets, and $A\subset X$, then
  we write the restriction of $f$ to $A$ as $f|_{A}\colon A\to X$
  defined by $\forall a\in A, f(a)=f|_{A}(a)$. In Mizar, this
  restriction is denoted ``\lstinline{f|A}'' and function application with it
  is ``\lstinline{(f|A).x}'' for $f|_{A}(x)$.
\item\index{\texttt{h in H}!Mizar for $h\in H$} Set membership $x\in X$ is
  denoted in Mizar by the formula ``\verb#x in X#''.
\end{enumerate}

\input{tex/introduction/natural-deduction}

\section{Basic Definitions}

We will review the definitions germane to group theory, as inspired
by Nakasho and friends~\cite{nakasho2014formalization}. This entire
section is inspired by their paper.

Recall, as Baez~\cite[week one]{baez2004qg-lectures}\index{Stuff, Structure, Properties} notes, there are
two ways to define a group. These two different definitions give rise to
\emph{different} notions of ``group homomorphism'' (but identical
notions of ``group isomorphism''). I will make bold the differences:

\begin{definition}[Version 1]\label{defn:introduction:mizar-style-group}
  A \emph{group} consists of
  \begin{enumerate}
  \item a set $G$
  \end{enumerate}
  equipped with
  \begin{enumerate}
  \item a binary operator $\mu\colon G\times G\to G$
  \end{enumerate}
  such that
  \begin{enumerate}
  \item Associativity: for any $g_{1}$, $g_{2}$, $g_{3}\in G$, we have
    $\mu(g_{1}, \mu(g_{2},g_{3})) = \mu(\mu(g_{1},g_{2}),g_{3})$
  \item \textbf{Existence of Unit: there exists an element $1\in G$ such
    that for any $g\in G$ we have $\mu(g,1)=\mu(1,g)=g$}
  \item \textbf{Existence of inverses: for each $g\in G$, there is an
    $h\in G$ such that $\mu(g,h)=1$}
  \end{enumerate}
\end{definition}

\begin{definition}[Version 2]
  A \emph{group} consists of
  \begin{enumerate}
  \item a set $G$
  \end{enumerate}
  equipped with
  \begin{enumerate}
  \item a binary operator $\mu\colon G\times G\to G$
  \item \textbf{a unit $1\in G$}
  \item \textbf{an inverse operator $\iota\colon G\to G$}
  \end{enumerate}
  such that
  \begin{enumerate}
  \item Associativity: for any $g_{1}$, $g_{2}$, $g_{3}\in G$, we have
    $\mu(g_{1}, \mu(g_{2},g_{3})) = \mu(\mu(g_{1},g_{2}),g_{3})$
  \item \textbf{Unit laws: for any $g\in G$ we have $\mu(g,1)=\mu(1,g)=g$}
  \item \textbf{Inverse law: for each $g\in G$, $\mu(\iota(g),g)=1$}
  \end{enumerate}
\end{definition}

\begin{def-remark}[Terminology: ``Morphisms'']
I will adopt modern terminology, and simply refer to a group
homomorphism as a ``\emph{group morphism}'', or more tersely as just a
morphism.
\end{def-remark}

\index{Magma|(} Mizar takes the first version as its definition. Implicit in its
definition is a notion of a ``\verb#multMagma#'', a magma with a
multiplication operator (defined in \verb#ALGSTR_0#). As Nakasho and
friends explicate~\cite{nakasho2014formalization}, a ``\verb#multMagma#''
is a magma as could be found in, e.g., Bourbaki's\index{Bourbaki, Nicholas}
\emph{Algebra}~\cite[see Ch.I\S1.1]{bourbaki1974elements}: it
consists of a set (which Mizar calls its ``\verb#carrier#'') and a
binary operator ``\verb#multF#''.\index{multF@\texttt{multF}}\index{carrier@\texttt{carrier}}\index{multMagma@\texttt{multMagma}}

Note: comments in Mizar are started by ``\verb#::#'' and continue until
the end of the line.

\begin{mizar}
:: algstr_0.miz
definition
  struct (1-sorted) multMagma (# carrier -> set,
  multF -> BinOp of the carrier
  #);
end;
\end{mizar}

Let us unpack what is going on in this code. We are defining a
\verb#struct#,\index{Struct@\texttt{struct}} a mathematical structure
which is usually presented in ordinary mathematics as a tuple of some
kind $\struct{\dots}$. For example, a field might be presented as
$\struct{F, +, \cdot, 0, 1}$ consisting of a set $F$, a couple binary
operators, and a couple of selected elements of $F$.

Mizar's grammar for defining a structure is:
\begin{equation}
  \langle\textit{structure-definition}\rangle ::=
  \mbox{\texttt{struct}}~(\langle\textit{ancestors}\rangle)~\langle\textit{symbol}\rangle~
  \mbox{\texttt{(\#}}\quad
  \langle\textit{fields}\rangle\quad
  \mbox{\texttt{\#)}}
  \texttt{;}
\end{equation}
The ancestors are optional. For ``\verb#multMagma#'',\index{multMagma@\texttt{multMagma}} it has one ancestor
(namely, ``\verb#1-sorted#''\index{1-sorted@\texttt{1-sorted}}). The fields for a structure look like a
comma-separated list whose entries are of the form:
\begin{equation}
  \langle\textit{field}\rangle ::= \langle\textit{identifier}\rangle\quad\mbox{\texttt{->}}\quad\langle\textit{type}\rangle
\end{equation}
We see that ``\texttt{multMagma}'' has two fields:
\begin{enumerate}
\item ``\texttt{carrier}'' which is a set
\item ``\texttt{multF}'' which is a ``\texttt{BinOp}'' (binary operator)
  acting on the ``\texttt{carrier}''.
\end{enumerate}
This matches Bourbaki's definition of a magma.\index{Magma|)}

\begin{notation}[Accessing fields of a structure]
We can refer to, e.g., the ``\verb#multF#'' of a given instance of a
``\verb#multMagma#'' by writing
``\verb#the multF of <instance>#''. These are called accessor
functors. Sometimes we want to access ``the underlying magma'' of an
algebraic gadget, and a horrible pun used to describe this is the
\emph{forgetful functor}\index{Functor!Forgetful}. We discuss more about
functors later on (\S\ref{par:introduction:functor-one-g}).
\end{notation}

\begin{aside}[Multiplication operator]\label{rmk:introduction:multiplication-operator}\index{\texttt{x * y}}
Before continuing on too far, I should note that for a
``\texttt{M being multMagma}'' we have an infix binary operator
``\texttt{x*y = (the multF of M).(x,y)}''. This is defined in
Definition~\mml[def19]{algstr0}.\MizDef{ALGSTR\_0}{19}
\end{aside}

\subsection{Equality of Instances of Structures}
If we a structure $\struct[Foo]{\mathsf{F}_{1},\dots,\mathsf{F}_{n}}$
with $n$ fields $\mathsf{F}_{j}$, then we can make an instance of it
using notation ``\verb$Foo(# F1, ..., Fn #)$'' where ``\verb$(#$'' is an
ASCII approximation to ``$\langle\!\langle$'', and ``\verb$#)$'' approximates
``$\rangle\!\rangle$''. Equality of two
instances follows the same axiomatic behavior as ordered $n$-tuples:
\verb$Foo(# E1, ..., En #) = Foo(# F1, ..., Fn #)$ if and only if each
pair of fields are equal
\verb#E1# = \verb#F1#, \dots, and \verb#En# = \verb#Fn#. If we tried
to assert two \emph{different} structures are equal --- e.g.,
\verb$Foo(# E1, ..., En #) = Bar(# F1, ..., Fm #)$ --- well, this is not
allowed, Mizar will reject it.

One caveat to this is if we have, for example, a topological group
$G_{1}$ (which has all the fields as a group \emph{and} a topological
space \emph{combined}) and, say, $S_{n}$ (which has all the fields of a
group, but nothing else), then we cannot meaningfully compare these
two. We will need to do something like write ``\verb#the Group of G1 = Sn#''
to compare the \emph{group structure} of $G_{1}$ to the \emph{Group structure}
of $S_{n}$.

\subsection{Mizar's definition of Group}
Mizar formalizes a group following the style of
Definition~\ref{defn:introduction:mizar-style-group}: it's a magma which
satisfies a bunch of extra properties (as opposed to a magma equipped
with more structure). Mizar's notion of ``extra properties'' is handled
by a mechanism called \define{Attributes}\index{Attribute!Mizar}, which
are adjectives we can tack onto types and they encode certain axioms or
formulas which must hold. There are three such attributes being defined
immediately in \texttt{group\_1.miz}:
\begin{enumerate}
\item ``\texttt{unital}''\index{unital@\texttt{unital}} which asserts
  $\exists_{e\esti \mathtt{IT}}\forall_{h\esti \mathtt{IT}} \mu(h,e)=h\land\mu(e,h)=h$
\item ``\texttt{Group-like}''\index{Group-like@\texttt{Group-like}},
  which extends the condition of ``\texttt{unital}'' with the assertion
  that for any element $h$ and inverse element $g$ exists
  $\exists_{e\esti \mathtt{IT}}\forall_{h\esti \mathtt{IT}} \mu(h,e)=h\land\mu(e,h)=h\land\exists_{g\esti \mathtt{IT}}\mu(h,g)=e\land\mu(g,h)=e$
\item ``\texttt{associative}''\index{associative@\texttt{associative}}
  which corresponds to our demand of associativity
  $\forall_{x,y,z\esti \mathtt{IT}}\mu(\mu(x,y),z)=\mu(x,\mu(y,z))$.
\end{enumerate}
With these attributes in hand, Mizar defines a group to be a
``\texttt{Group-like associative non empty multMagma}'', i.e., a magma such
that it is associative and group-like (has an identity element and for
each element, a corresponding inverse element exists). This is collected
in a new type, or \define{Mode}\index{Mode!in Mizar} (as Mizar calls them).

\index{Unital@\texttt{unital}|(}\index{Group-like@\texttt{Group-like}|(}\index{Associative@\texttt{associative}|(}
\begin{mizar}
:: group_1.miz
definition
  let IT be multMagma;

  attr IT is unital means
:: GROUP_1:def 1
  ex e being Element of IT st for h being
  Element of IT holds h * e = h & e * h = h;

  attr IT is Group-like means
:: GROUP_1:def 2
  ex e being Element of IT st for h being Element of IT
  holds h * e = h & e * h = h &
        ex g being Element of IT st h * g = e & g * h = e;

  attr IT is associative means
:: GROUP_1:def 3
  for x,y,z being Element of IT holds (x*y )*z = x*(y*z);
end;

definition
  mode Group is Group-like associative non empty multMagma;
end;
\end{mizar}
\index{Associative@\texttt{associative}|)}\index{Group-like@\texttt{Group-like}|)}\index{Unital@\texttt{unital}|)}\index{Group@\texttt{Group}|textbf}

\begin{idiom}\label{rmk:introduction:idiom-it-in-attributes}\index{Idiom!IT in Attributes}\index{IT@\texttt{IT}}
Whenever defining an attribute in Mizar, we have an ambient
``\verb#IT#'' object for which the attribute will be defined upon. For
example, these attributes appearing in \mml[def 1]{group1} are defined
on a \verb#multMagma#.
\end{idiom}

\begin{aside}[Registering attributes as adjectives]\index{Registration}
Once we have defined attributes, we cannot use them as adjectives for
types until we ``\verb#register#'' them. Without registration, writing
something like ``\texttt{let x be associative multMagma}'' would confuse
Mizar, and it would throw an error. Until registered, we would have to
write something like ``\texttt{let x be multMagma; assume x is associative}''
or ``\texttt{let x be multMagma such that x is associative}''.
\end{aside}

Observe that a more faithful translation of Mizar's definition would
be:

\begin{quote}
  \textbf{Definition.} A \emph{Group} $\struct{G,\cdot}$ is a set of
  elements with a binary operator $\cdot\colon G\times G\to G$
  satisfying the following conditions:
  \begin{enumerate}
  \item \textbf{Associativity:} for all $a,b,c\in G$, we have $(a\cdot b)\cdot c = a\cdot(b\cdot c)$
  \item \textbf{Identity element:} There exists an element $e$ such that
    $e\cdot a= a\cdot e = a$ for all $a\in G$
  \item \textbf{Inverse Element:} For all $a\in G$, there exists an
    element $b\in G$ with $a\cdot b=b\cdot a = e$.
  \end{enumerate}
\end{quote}

We often work with multiple groups, and if we want to refer to the
identity element of a particular group, then in ordinary mathematics we
write either $1_{G}$ (if $G$ uses multiplicative notation) or $0_{G}$
(if $G$ uses addition). Mizar has a way to encode this convention, which
is the next definition in
\texttt{group\_1.miz}:\MizDef{GROUP\_1}[04]{4}
\mizindex{1G@$\mathtt{1\_G}$}

\begin{mizar}
definition
  let G be multMagma such that
A1: G is unital;
  func 1_G -> Element of G means
:: GROUP_1:def 4
  for h being Element of G holds h * it = h & it * h = h;
  existence by A1;
  uniqueness
  proof
    let e1,e2 be Element of G;
    assume that
A2: for h being Element of G holds h * e1 = h & e1 * h = h and
A3: for h being Element of G holds h * e2 = h & e2 * h = h;
    thus e1 = e2 * e1 by A3
           .= e2 by A2;
  end;
end;
\end{mizar}

\subsubsection{Functor Definitions}\label{par:introduction:functor-one-g} What's going on here? Well, for any unital magma $G$, we have a
``functor'' (a logical function, i.e., parametrized term) denoted
``\verb#1_#'' which produces the unit element for the given magma.
Whereas (in print) mathematicians would write $1_{G}$, in Mizar we would
write ``\verb#1_G#''.

Such a term is defined as $\forall h\in G, h\cdot\mathtt{it}=h\land\mathtt{it}\cdot{h}=h$.
Here ``\verb#it#''\index{It@\texttt{it}} anaphorically\footnote{We have
Lisp programmers to thank for this lovely term.} refers to the
definiendum (the term being defined, i.e., ``\verb#1_G#''). Whenever
functors are defined, their defining properties will involve
``\verb#it#'' satisfying some formula.\footnote{The ``\texttt{IT}''
appearing in definitions of attributes play an analogous role, hence the
idiom noted in Idiom~\ref{rmk:introduction:idiom-it-in-attributes}.}

Mizar demands we prove such a thing exists, and then a proof of
uniqueness is supplied. This coincides with the usual practice in
mathematical logic, when considering a ``function term'' in first-order
logic, which has [existence] exactly one [uniqueness] output for each
possible argument configuration.

\begin{aside}[Functors in Mizar]\index{Functor!In Mizar|(}
A functor in Mizar is the only way to construct a term. Rudnicki and
friends~\cite{rudnicki2001commutative} cite the term originating from
Rasiowa and Sikorski~\cite[see p.148]{rasiowa1963mathematics},
quoting: ``\dots some signs in the formalized language should correspond
to the mappings and functions being examined. These signs are called
\emph{functors}, or---more precisely---\emph{$m$-argument functors}
provided they correspond to $m$-argument mappings from objects to
objects ($m = 1, 2, \dots$)''.

\emph{\textbf{This has absolutely no relation to functors in category theory},
and in my opinion is an extremely poor
choice of terminology due entirely to the ironies of history.}
\index{Functor!In Mizar|)}%
\end{aside}

\subsubsection{Stuff, Structure, Properties versus Mizar Definitions}\index{Stuff, Structure, Properties|textbf}
I grew up learning abstract algebra from the perspective of Baez--Dolan
``Stuff, Structure, and Properties''~\cite{baez2001finite,baez2004qg-lectures,baez2006quantum,baez2010lectures}, thinking in terms of ``group objects''
in some ambient category. Defining new gadgets could then be framed in
terms of consisting of objects equipped with morphisms satisfying some
commutative diagrams. As an added bonus, we get morphisms ``for free''.

Mizar takes a more ``traditional'' approach, defining a
\lstinline{struct} which loosely lists the stuff and minimul structure
underlying a gadget. The properties are then defined as attributes. Even
some structure are introduced using attributes (like the inverse
operator for groups). And then the gadget is bundled together as a
mode. Unlike the Baez--Dolan approach, we do not get morphisms for free.

\subsection{Examples of Groups}
There are not many examples of groups in Mizar, only four nontrivial
groups (that I could find).

\begin{example}
  The real numbers equipped with addition are proven to be a group in
  Theorem~\mml[Th3]{group1}.
\end{example}

\begin{example}\index{$\ZZ$!Group}
The integers, as an additive group, are defined as \lstinline|INT.Group|\mizindex{Integers@\texttt{INT.Group}}
in Definition~\mml[def 1]{gr_cy_1}.
\end{example}

\begin{example}[Cyclic group $\cyclicGroup{n}$]\label{example:introduction:cyclic-group}\index{Group!Cyclic}
The finite cyclic group of order $n$ is defined as \lstinline|INT.Group(n)|\mizindex{Integers@\texttt{INT.Group(n)}}
in Definition~\mml[def 5]{gr_cy_1}. The notion of a cyclic group is
introduced in Definition~\mml[def 7]{gr_cy_1}\MizDef{gr\_cy\_1}{7}\mizindex{Cyclic@\texttt{cyclic}}, and the finite cyclic
group is registered as cyclic.
\end{example}

\begin{example}[Symmetric Group]\index{Group!Symmetric}
Given a non-empty set $X$, we can consider the group of bijections on
$X$, popularly known as the \define{Symmetric Group} and denoted
$\Sym(X)$. It's introduced in Definition~\mml[def 2]{cayley}. I should
double check how this is, in comparison to permutations as defined in
Definition~\mml[def 5]{funct2}. It does not appear to be developed
anywhere further, for example: the alternating group is not defined anywhere.
\end{example}


\subsection{Inverse operator for group elements}
When we have a group $\struct{G,\cdot}$, we also have the ability
to invert any given element $g\in G$. Mizar denotes this by
``\verb#g"#'', which is what the ``Rosette stone'' of notation suggests
(since mathematicians would write $g^{-1}$). This is handled in~\mml[def 5]{group1}.\MizDef{GROUP\_1}[05]{5}
A formal ``\verb#inverse_op(G)#''\mizindex{Inverse Op(G)@$\mathtt{inverse\_op(G)}$} is given in~\mml[def 6]{group1}.\MizDef{GROUP\_1}[06]{6}

\begin{notation}[Inverse operator for subsets of $G$]
We generalize this notation in group theory to write, if $A\subset G$ is
some subset, $A^{-1}=\{a^{-1}\in G\mid a\in A\}$. Mizar defines this
notation in \mml[def 1]{group2}.\MizDef{GROUP\_2}[01]{1}
\end{notation}

\subsection{Power operator}
For any $g\in G$, and $n\in\NN_{0}$, we often write $g^{n}$ with the
understanding this stands for $g^{0}=1_{G}$ and $g^{n+1}=g^{n}\cdot g$.
This is defined in~\mml[def 7]{group1}\MizDef{GROUP\_1}[07]{7}. But we generalize this in
mathematics to let $n\in\ZZ$, allowing the case when $n<0$ to be defined
by $g^{n} = (g^{|n|})^{-1}$.

Mizar does this in~\mml[def 8]{group1},\MizDef{GROUP\_1}[08]{8}
following the conventions taken by earlier articles in Mizar that
$x^{y}$ is denoted by ``\verb#x |^ y#''.\index{\texttt{x \mid\Caret y}@{\texttt{x "|"\Caret\ y}}!Mizar for $x^{y}$}
For the sake of consistency, Mizar explicitly states in~\mml[def 8]{group1}
when $g\in G$ and $n\esti \NN_{0}$, it follows
that ``\verb#g |^ n#'' coincides with what we expect (i.e., $g^{n}$).

\subsection{Order of Group Element (and Group Order)}
If $h\in G$, then we say $h$ is of order 0 if the only $n\in\NN_{0}$
satisfying $h^{n}=1_{G}$ is $n=0$. Mizar defines this as an attribute
in~\mml[def 10]{group1}\MizDef{GROUP\_1}{10} as ``\verb#being_of_order_0#''\index{Being of Order 0@$\mathtt{being\_of\_order\_0}$}\mizindex{Being of Order 0@$\mathtt{being\_of\_order\_0}$}.
This segues into defining the notion of the order for an element $g\in G$
as the smallest natural number $|g|=n\in\NN_{0}$ for which $g^{n}=1_{G}$
(provided $g$ is not of order zero, in which case we specially define
its order to be $|g|=0$). Mizar defines this as
``\verb#ord g#''\index{Order!\texttt{ord g}}\mizindex{ord g@$\mathtt{ord~g}$}
in~\mml[def 11]{group1}.\MizDef{GROUP\_1}{11}

The order of the group, Mizar overloads the cardinality operator (again,
matching mathematical practice). Specifically,
for $G$ being any finite 1-sorted typed object (like a group), we have
``\verb#card G#''\mizindex{Card G@\texttt{card G}}\index{Cardinality@\texttt{card G}} be the cardinality
of the underlying set.

\subsection{Abelian Groups}
Sadly, Mizar departs from mathematical practice, and defines an
attribute in~\mml[def 12]{group1}\MizDef{GROUP\_1}{12} for a \verb#multMagma# to be
``\verb#commutative#''.\index{Commutative@\texttt{commutative}}\index{Abelian|see{\texttt{commutative}}}\mizindex{Commutative@\texttt{commutative}}
This demands the expected property
\begin{equation*}
  \forall x,y\in G, x\cdot y=y\cdot x.
\end{equation*}

\section{Subgroups}

\subsection{Helper notation}
We have $A,B\subset G$ be subsets of the carrier set underlying a
non-empty magma $G$. Then we can define ``\verb#A*B#'' as the set of
elements of the form $ab$ for $a\in A$ and $b\in B$. This was done in
\mml[def 2]{group2}\MizDef{GROUP\_2}[02]{2}. Similarly (in definitions
3 and 4\MizDef{GROUP\_2}[03]{3}\MizDef{GROUP\_2}[04]{4}) we can define
for any subset $A\subset G$ and any $g\in G$ the product $Ag$ and $gA$
in the obvious way.

For any subgroup $H\subgroup G$ and subset $A\subset G$,
\mml[def 11]{group2}\MizDef{GROUP\_2}{11} defines \verb$A*H$ and
\verb$H*A$ \emph{as subsets of the carrier of $G$} using the set
underlying $H$, then using the earlier definitions (from
\mml[def 2]{group2}).

Similarly, for any subgroup $H\subgroup G$ and $g\in G$, we have
\verb#g*H# and \verb#H*g# be defined using the underlying set of $H$.

\subsection{Subgroup}
For a group $G$, \mml[def 5]{group2}\MizDef{GROUP\_2}[05]{5} defines a
``\verb#Subgroup of G#'' to be a Group-like non-empty \verb#multMagma#
such that its carrier is a subset of the underlying set of $G$, and the
Subgroup's multiplication operator is the multiplication from $G$
restricted to the Subgroup.

\begin{notation}
We denote $H\subgroup G$ for the statement ``$H$ is a subgroup of $G$''.
\end{notation}

\subsection{Equality of Subgroups}\label{par:introduction:subgroup-equality}
For reasons which are not well documented, \mml[def 6]{group2}
redefines equality for \emph{strict} Subgroups. Non-strict subgroups
cannot be equal (not as subgroups).

There are a few useful theorems
concerning equality of subgroups, but the idiomatic Mizar code seems to
be to assert ``\texttt{the multMagma of H1 = the multMagma of H2}''.
When the user knows both subgroups are strict, they can set ``\texttt{H1 = H2}''.



\begin{aside}[On ``strict'' mathematical gadgets]\index{strict@\texttt{strict}|textbf}
Mizar has a notion of a ``\texttt{strict}'' attribute. What does it mean?
Well, sometimes a mathematical gadget is ``composite''; like a vector
space over a field is an Abelian group with vector addition, but it also
has other stuff (like scalar multiplication). This ``other stuff''
prevents it from being a ``bald-faced Abelian group''. Just as black
holes have no hair, strict groups have no hair: it's just a
``\texttt{multMagma}'' satisfying the group properties (in Mizar, at
least).

We can always coerce a gadget into a strict version by manually
constructing it from the relevant fields. For example, given any group
$G$, we can construct a strict group as follows:
\begin{mizar}
:: given some non-strict Group G
reconsider strict_G = multMagma (# the carrier of G, the multF of G #)
as strict Group;
:: now use strict_G to prove results
\end{mizar}
\end{aside}

\subsection{Trivial Subgroups}\index{$\trivialSubgroup_{G}$}
For any group $G$, $\trivialSubgroup_{G}$ is the trivial subgroup
consisting of the identity element \verb#1_G# and nothing else. This is
defined in \mml[def 7]{group2}\MizDef{GROUP\_2}[07]{7} and denoted \verb#(1).G#\mizindex{1.G@$\mathtt{(1).G}$}. The other
trivial subgroup is denoted by mathematicians as $G$ itself, but Mizar
distinguishes this trivial improper subgroup as $\Omega_{G}$\index{$\Omega_{G}$} in
\mml[def 8]{group2}\MizDef{GROUP\_2}[08]{8}.\mizindex{Omega.G@$\mathtt{(Omega).G}$}

\subsection{Intersection of Subgroups}
If $H_{1}\subgroup G$ and $H_{2}\subgroup G$, then $H_{1}\cap H_{2}$ is
a subgroup of $G$, too. Mizar denotes this by
\texttt{H1 /\char`\\{} H2}\index{\texttt{H1 /\char`\\{} H2}}. Its
defined in \mml[def 10]{group2}\MizDef{GROUP\_2}{10} as the group whose
underlying set is the intersection of the sets underlying $H_{1}$ and $H_{2}$.

\subsection{Cosets}
For any subgroup $H\subgroup G$, we can consider the left (or right)
cosets of $H$ as the family of subsets of $G$ of the form
$\{gH|g\in G\}$ (resp., $\{Hg|g\in G\}$). This is defined in
\mml[def 15,16]{group2}.\MizDef{GROUP\_2}{15}\MizDef{GROUP\_2}{16}\mizindex{Right Cosets@$\mathtt{Right\_Cosets}$}\mizindex{Left Cosets@$\mathtt{Left\_Cosets}$}

This naturally leads to a notion of the index of a subgroup $H\subgroup G$,
which Mizar defines as \verb#Index H#\mizindex{Index@\texttt{Index}} in
\mml[def 17]{group2}\MizDef{GROUP\_2}{17} as the
cardinality of the collection of left cosets of $H$ in $G$. This is
proven to be the same as the same definition using right cosets in
\mml[Th 145]{group2}.\MizThm{GROUP\_2}{145}

More generally, the collection of all possible subgroups of $G$ is given
in \mml[def 1]{group3}\MizDef{GROUP\_3}[01]{1} as
``\verb#Subgroups G#''\mizindex{Subgroups@\texttt{Subgroups}}.

\section{Conjugation}
For any $a,b\in G$ the conjugate of $a$ by $b$ defined as $a^{b}$ (or
using Mizar syntax ``\verb#a |^ b#''\index{\texttt{x \mid\Caret y}@{\texttt{x "|"\Caret\ y}}!Mizar for $x^{y}$}\mizindex{\texttt{x \mid\Caret y}@{\texttt{x "|"\Caret\ y}}})
for $b^{-1}ab$. For subsets $A,B\subset G$, we define
``\verb#A |^ B#'' for $\{g^{h}\mid g\in A,h\in B\}$. We similarly have
$A^{g}$ be defined as $A^{\{g\}}$, and $g^{A}$ is defined as $\{g\}^{A}$.

Analogous definitions hold for subgroups $H\subgroup G$ and $a\in G$, we
have $H^{a}$ be \emph{the strict subgroup} of $G$ whose underlying set
is given by $H^{\{a\}}$.

We have a predicate to assert two elements $a,b\in G$ are
conjugate. Namely, ``\verb#a,b are_conjugated#''\mizindex{Are Conjugated@$\mathtt{are\_conjugated}$} if there exists some
$g\in G$ such that $a = b^{g}$. This is done in
\mml[def7]{group2}\MizDef{GROUP\_2}[07]{7}. We generalize this
definition to arbitrary subsets $A$, $B\subset G$ \verb#are_conjugated# if
there is a $g\in G$ such that $A = B^{g}$. Similarly, two subgroups
$H_{1}$, $H_{2}\subgroup G$ \verb#are_conjugated# if there is a $g\in G$
such that the magma underlying $H_{1}$ is equal to $H_{2}^{g}$.

The conjugacy class for:
\begin{enumerate}
\item an element $a\in G$ is defined ``in the obvious way''
as ``\texttt{con\_class a}\mizindex{Conjugacy Class@$\mathtt{con\_class}$}
is the subset \verb#a |^ (Omega).G#'';
\item a subset $A\subset G$ as the collection of all subsets $B\subset G$
such that $A$ and $B$ \verb#are_conjugated# (i.e., there is a $g\in G$
such that $A = B^{g}$);
\item a subgroup $H\subgroup G$ in Definition~\mml[def12]{group3} as the
  collection of all subgroups which are conjugate to $H$
\end{enumerate}

\begin{theorem}[{Dummit and Foote~\cite[Cor.~4.14]{dummit-foote}}]
  If $H\subgroup G$ is any subgroup and $g\in G$, then
  $H$ and $gHg^{-1}$ are isomorphic. Conjugate elements have the same
  order. Conjugate subgroups have the same order.
\end{theorem}

\begin{thm-remark}
Mizar has the following results:
\begin{itemize}
\item \mml[Th28]{group3}\MizTh{GROUP\_3}{28} states, for any group elements $a,b\in G$ and
  any integer $k\in\ZZ$, we have $(b^{-1}ab)^{k} = b^{-1}(a^{k})b$;
\item \mml[Th64]{group3}\MizTh{GROUP\_3}{64} proves conjugate subgroups have the same order;
\item \mml[Th71]{group3}\MizTh{GROUP\_3}{71} proves conjugate subgroups in $G$ have the
  same index;
\item \mml[Th16]{group8}\MizTh{GROUP\_8}{16} proves, for any nonempty subset $A\subset G$,
  its conjugates $g^{-1}Ag$ (for any $g\in G$) has the same cardinality
  as $A$\dots which should imply conjugate subgroups have the same
  order, too.
\end{itemize}
\end{thm-remark}


\subsection{Normal Subgroups}
Having thus described conjugation of elements, subsets, and subgroups by
elements, subsets, and subgroups, we have enough infrastructure to
define a notion of ``normal subgroup''. Mizar's
\mml[def13]{group2}\MizDef{GROUP\_2}{13} defines an attribute for a subgroup
$N\subgroup G$ is \verb#normal#\mizindex{Normal@\texttt{normal}} if for
every $a\in G$, we have $N^{a}$ and $N$ \verb#are_conjugated# (more
literally, $N^{a} = \mathtt{the~multMagma~of~}N$).

For any subset $A\subset G$, the \lstinline{Normalizer}\mizindex{Normalizer@\texttt{Normalizer}} of $A$ is defined in
\mml[def14]{group2}\MizDef{GROUP\_2}{14} as the subgroup of $G$ whose
underlying set is $\{h \mid A^{h} = A\}$. We generalize this notion in
\mml[def15]{group2}\MizDef{GROUP\_2}{15} to subgroups $H\subgroup G$ by just taking the
normalizer of the underlying set of $H$.

\subsection{Group generated by a subset}
For $A\subset G$, we define\index{$\langle A\rangle$}
\begin{equation}
\langle A\rangle = \bigcap_{A\subset H\subgroup G} H.
\end{equation}
Mizar defines this in \mml[def4]{group4}\MizDef{GROUP\_4}{4} as
``\verb#gr A#''\mizindex{Gr A@\texttt{gr A}}. In fact, this defining
property of $\langle A\rangle$ is proven in Theorem~\mml[Th34]{group4}\MizThm{GROUP\_4}{34}.

\subsection{Element is Generating}
We call an element $a\in G$ \emph{generating} if there is an $A\subset G$
such that $\langle A\rangle = G$ (i.e., \texttt{gr A = G}) and
$\langle A\setminus\{a\}\rangle\neq G$ (i.e., \texttt{gr(A \ \{a\}) = G}).
Mizar provides this in \mml[def5]{group4}\MizDef{GROUP\_4}{5} as
an attribute \verb#generating#\mizindex{Generating@\texttt{generating}}.

As we noted earlier in Example~\ref{example:introduction:cyclic-group},
the related notion of a group being \lstinline{cyclic} is found in
Definition~\mml[def 7]{gr_cy_1}\MizDef{gr\_cy\_1}{7}\mizindex{Cyclic@\texttt{cyclic}}
which asserts there exists some element $a\in G$ such that \lstinline!gr {a}!
is the group.

\subsection{Finite Sequence of Subgroups}
The first section of~\mml{group4} formalizes notions related to finite
sequences of subgroups of a fixed group $G$. If we have two finite
sequences $F_{1}=(H_{1},\dots,H_{m})$ and $F_{2}=(K_{1},\dots,K_{n})$,
we can append them together $F_{1}\concatenate F_{2}=(H_{1},\dots,H_{m},K_{1},\dots,K_{n})$.
The Mizar notation for this is \lstinline{F1 ^ F2} as introduced in
Definition~\mml[def7]{finseq1}.

If we have a finite sequence of group elements $F=(g_{1},\dots,g_{m})$,
then Definition~\mml[def2]{group4} defines their product as:
\begin{subequations}
  \begin{align}
    \prod () &= 1_{G}\\
    \prod (g_{1})\concatenate F &= g_{1}\cdot\left(\prod F\right).
  \end{align}
\end{subequations}
This uses a more generic notion of folding a finite sequence using a
binary function, found in Definition~\mml[def1]{finsop1}.\MizDef{FINSOP\_1}{1}

We can also consider, for any finite sequence $F=(g_{1},\dots, g_{n})$ of
group elements and finite sequence $I=(k_{1},\dots,k_{n})$ of integers,
both having $n$ elements, the component-wise exponentiation
\begin{equation}
  F^{I} = (g_{1}^{k_{1}}, g_{2}^{k_{2}}, \dots, g_{n}^{k_{n}}).
\end{equation}
This is defined in Definition~\mml[def3]{group4}\MizDef{GROUP\_4}{3} and uses the usual
Mizar notation for exponentiation, \lstinline{F |^ I}.

\subsection{Frattini Subgroup}\index{Frattini Subgroup}\index{$\Phi(G)$}
We define a maximal subgroup as one which is proper and not contained in
any other proper subgroup (Mizar defines this as an attribute for a
subgroup $H\subgroup G$ in \mml[def6]{group3}\MizDef{GROUP\_3}[06]{6}\mizindex{Mazimal@\texttt{maximal}}).
This is necessary to define the Frattini subgroup $\Phi(G)$ as the
intersection of all proper maximal subgroups of $G$ when $G$ is finite
and nontrivial (when $G=\trivialSubgroup$ or $G$ is infinite, then
$\Phi(G)=G$). Mizar uses this very definition in
\mml[def7]{group3}\MizDef{GROUP\_3}[07]{7} to define \texttt{Phi(G)}\mizindex{Phi(G)@\texttt{Phi(G)}}
as a functor.

Coincidentally, this is a characteristic subgroup of $G$.
% Encyclopedia of mathematics cites the following for further results
% concerning Phi(G):
% [a4] D.J.S. Robinson, "A course in the theory of groups" , Springer (1982)
% [a5] W.R. Scott, "Group theory" , Prentice-Hall (1964)

\subsection{Lattice of Subgroups}
We can form a lattice (in the sense of order theory) of the subgroups,
ordered by inclusion, whose join $H_{1}\lor H_{2}$ is given in
Definition~\mml[def8]{group4} as the smallest subgroup
containing both $H_{1}$ and $H_{2}$, and whose meet is $H_{1}\cap H_{2}$
the intersection of subgroups. The lattice of subgroups for $G$ is given
in Definition~\mml[def12]{group4} whose underlying set is precisely the
collection of all subgroups of $G$ as given by Definition~\mml[def1]{group3}.

This may be a bit difficult to read, since Mizar uses second-order
reasoning with schemes.

\section{Commutators}

\begin{definition}[{\mml[def 2,3]{group5}}]\index{Commutator}
  Let $G$ be a group and let $x$, $y\in G$ be arbitrary.
  Then the \define{Commutator} of $x$ with $y$ is
  \begin{equation*}
    [x,y] = x^{-1}y^{-1}xy.
  \end{equation*}
  We abuse notation and write $[x,y,z] = [{[x,y]},z]$,
  $[w,x,y,z] = [{[w,x,y]},z]$, and so on.
\end{definition}

\begin{def-remark}
Mizar defines its commutators, $[x,y]$ in \mml[def 2]{group5}\MizDef{GROUP\_5}[002]{2}, and
$[x,y,z]$ in \mml[def 3]{group5}.\MizDef{GROUP\_5}[003]{3}
\end{def-remark}

\begin{def-remark}
This convention, while used in Mizar (see Definition~\mml[def 2]{group5})
and finite group theory, clashes with the convention with Lie groups
where they have $[X,Y]_{\text{Lie}}=XYX^{-1}Y^{-1}$ to have the Lie
bracket for the corresponding Lie algebra coincide with the commutator
$[x,y] = xy - yx$. However, one advantage of the finite group version is
that $[g,h] = g^{-1}g^{h}$ where $g^{h}=h^{-1}gh$ is conjugation of $g$
by $h$. \emph{Extreme care must be taken when working with finite groups
of Lie type!}
\end{def-remark}

\begin{notation}
  Mizar denotes the commutator $[x,y]$ as \lstinline![.x,y.]! where
  ``\verb#[.#'' and ``\verb#.]#'' are left and right functor brackets
  introduced in the \mml{xxreal1} vocabulary.
\end{notation}

\begin{definition}\index{$G'$}\index{Subgroup!Derived}\index{$[G,G]$}
Let $G$ be a group. The \define{Derived Subgroup} of $G$ is the subgroup
denoteed $G'$ or $[G,G]$ generated by commutators of elements of $G$, where
for generic subsets $X,Y\subset G$ we denote
\begin{equation}
  [X,Y] = \langle [x,y] : x\in X,y\in Y\rangle.
\end{equation}
We also use the notation $[X,Y,Z] = [\,{[X,Y]},Z]$, $[W,X,Y,Z] = [\,{[W,X,Y]},Z]$,
and so on. In particular, $[X,Y,Z] = \langle [a,z] : a\in[X,Y], z\in Z\rangle$.
\end{definition}

\begin{def-remark}
This is defined for arbitrary subsets $A\subset G$ and $B\subset G$ in
\mml[def 7]{group5},\MizDef{GROUP\_5}[07]{7} and for subgroups $H_{1}\subgroup G$ and
$H_{2}\subgroup G$ in \mml[def 8]{group5}.\MizDef{GROUP\_5}[08]{8} The derived subgroup is
denoted ``\verb#G `#'' (that is the letter G followed by a
backtick/back-quote [grave accent]) and defined in \mml[def 9]{group5}.\MizDef{GROUP\_5}[09]{9}\mizindex{G'@\texttt{G`}}
\end{def-remark}

\begin{def-remark}
  Mizar does not define $[X,Y,Z]$ for subgroups $X,Y,Z\subgroup G$.
\end{def-remark}

\begin{theorem}[{\mml[Th23]{group5}}]
For any $x,y,z\in G$, we have $[x,y]^{z} = [x^{z},y^{z}]$.
\end{theorem}

\begin{theorem}[{\mml[Th25,26]{group5}}]
  For any $x,y,z\in G$, we have $[xy,z] = [x,z]^{y}[y,z]$ and
  $[x,yz] = [x,z] [x,y]^{z}$.
\end{theorem}

\begin{theorem}[{Hall--Witt identity, \mml[Th46]{group5}}]
  For any $x,y,z\in G$ we have
  \begin{equation}
    [x, y^{-1}, z]^y\cdot[y, z^{-1}, x]^z\cdot[z, x^{-1}, y]^x = 1.
  \end{equation}
\end{theorem}

\begin{theorem}[Hall's Three Subgroup Lemma]
  Let $H$, $K$, $L$ be subgroups of $G$.
  If $[H,K,L]=\trivialSubgroup$ and $[K,L,H]=\trivialSubgroup$,
  then $[L,H,K]=\trivialSubgroup$.
\end{theorem}

This was not proven in Mizar, but it seems do-able.


\begin{definition}[{\mml[def 10]{group5}}]\mizindex{Center@\texttt{center}|see{$\mathtt{GROUP\_5:def 10}$}}\index{$Z(G)$}\index{Center}\index{Group!Center}
Let $G$ be a group. Its \define{Center} is the Subgroup $Z(G)\subgroup G$
consisting of all elements which commute with all of $G$:
\begin{equation*}
Z(G) = \{z\in Z(G) | \forall g\in G, zg=gz\}
\end{equation*}
\end{definition}


\subsection{Simple Group}
Definition~\mml[def12]{group9} defines a group to be
\define{Simple}\index{Simple!Group}\index{Group!Simple}
if it is not trivial and there is no [strict] normal proper Subgroup of
it. The attribute is
\lstinline{simple}\mizindex{Simple@\texttt{simple}}, in all lowercase.
